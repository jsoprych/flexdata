"use strict";(()=>{var D=Object.defineProperty;var m=(a,t,s)=>t in a?D(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var e=(a,t,s)=>m(a,typeof t!="symbol"?t+"":t,s);var i=class i{constructor(){e(this,"data",[]);e(this,"filteredData",[]);e(this,"sortColumn",null);e(this,"sortDirection","asc");e(this,"selectedRow",null);e(this,"listeners",{})}static getInstance(){return i.instance||(i.instance=new i),i.instance}async loadData(t){try{let s=await fetch(t);if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));this.data=await s.json(),this.filteredData=[...this.data],this.notify("data-updated",this.filteredData)}catch(s){console.error("Fetch error:",s),this.notify("error",{message:"Error loading data: ".concat(s.message)})}}setFilter(t){let s=this.data.length>0?Object.keys(this.data[0]):[];this.filteredData=this.data.filter(r=>s.some(l=>(r[l]||"").toLowerCase().includes(t.toLowerCase()))),this.notify("data-updated",this.filteredData)}setSort(t,s){this.sortColumn=t,this.sortDirection=s,this.filteredData.sort((r,l)=>{var h,u;let o=(h=r[t])!=null?h:"",n=(u=l[t])!=null?u:"",f=["customer_id","tax_id"].includes(t),p=!isNaN(parseFloat(o))&&isFinite(parseFloat(o)),w=!isNaN(parseFloat(n))&&isFinite(parseFloat(n));if(f&&p&&w)return this.sortDirection==="asc"?parseFloat(o)-parseFloat(n):parseFloat(n)-parseFloat(o);let c=o.toString().toLowerCase(),d=n.toString().toLowerCase();return this.sortDirection==="asc"?c.localeCompare(d):d.localeCompare(c)}),this.notify("data-updated",this.filteredData)}setSelectedRow(t){this.selectedRow=t,this.notify("row-selected",this.selectedRow)}getFilteredData(){return this.filteredData}getSelectedRow(){return this.selectedRow}getSortColumn(){return this.sortColumn}getSortDirection(){return this.sortDirection}on(t,s){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(s)}off(t,s){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(r=>r!==s))}notify(t,s){this.listeners[t]&&this.listeners[t].forEach(r=>r(s))}};e(i,"instance");var g=i;})();
//# sourceMappingURL=data-controller.js.map
