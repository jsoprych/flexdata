"use strict";(()=>{var D=Object.defineProperty;var E=(n,i,t)=>i in n?D(n,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[i]=t;var s=(n,i,t)=>E(n,typeof i!="symbol"?i+"":i,t);var g=class extends HTMLElement{constructor(){super();s(this,"shadow");s(this,"data",[]);s(this,"filteredData",[]);s(this,"sortColumn",null);s(this,"sortDirection","asc");s(this,"currentPage",1);s(this,"rowsPerPage",10);s(this,"showJson",!1);this.shadow=this.attachShadow({mode:"open"}),this.render()}static get observedAttributes(){return["data-src","rows-per-page"]}attributeChangedCallback(t,r,d){t==="data-src"&&d&&r!==d&&this.loadData(d),t==="rows-per-page"&&(this.rowsPerPage=parseInt(d||"10",10)||10,this.currentPage=1,this.render())}connectedCallback(){let t=this.getAttribute("data-src");t&&this.loadData(t)}async loadData(t){try{let r=await fetch(t);if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));this.data=await r.json(),this.filteredData=[...this.data],this.render()}catch(r){console.error("Fetch error:",r),this.shadow.innerHTML="\n                <style>\n                    .error { color: var(--text-error, #d32f2f); font-family: var(--font-family, 'Helvetica', 'Arial', sans-serif); }\n                </style>\n                <div class=\"error\">Error loading data: ".concat(r.message,"</div>\n            ")}}render(){var b,f,v;let t=this.data.length>0?Object.keys(this.data[0]):[],r=(this.currentPage-1)*this.rowsPerPage,d=r+this.rowsPerPage,u=this.filteredData.slice(r,d),h=Math.ceil(this.filteredData.length/this.rowsPerPage);this.shadow.innerHTML='\n            <style>\n                :host {\n                    display: block;\n                    font-family: var(--font-family, \'Helvetica\', \'Arial\', sans-serif);\n                }\n                .grid-container {\n                    background: var(--bg-primary, #ffffff);\n                    border-radius: var(--border-radius, 8px);\n                    box-shadow: var(--shadow, 0 2px 4px rgba(0, 0, 0, 0.05));\n                    padding: var(--padding, 16px);\n                }\n                .controls {\n                    margin-bottom: 16px;\n                    display: flex;\n                    gap: 16px;\n                    align-items: center;\n                }\n                input[type="text"] {\n                    padding: 8px;\n                    border: 1px solid var(--border-color, #d8dee9);\n                    border-radius: var(--border-radius, 8px);\n                    font-size: var(--font-size-cell, 14px);\n                }\n                select {\n                    padding: 8px;\n                    border: 1px solid var(--border-color, #d8dee9);\n                    border-radius: var(--border-radius, 8px);\n                }\n                table {\n                    width: 100%;\n                    border-collapse: collapse;\n                    background: var(--bg-primary, #ffffff);\n                }\n                th {\n                    background: var(--bg-header, #d9e6f2);\n                    padding: 12px;\n                    font-weight: 600;\n                    text-align: left;\n                    cursor: pointer;\n                    user-select: none;\n                    border-bottom: 1px solid var(--border-color, #d8dee9);\n                }\n                th:hover {\n                    background: var(--bg-header-hover, #c8d7e8);\n                }\n                td {\n                    padding: 12px;\n                    border-bottom: 1px solid var(--border-color, #d8dee9);\n                    font-size: var(--font-size-cell, 14px);\n                }\n                tr:nth-child(even) {\n                    background: var(--bg-row-even, #e6f0fa);\n                }\n                tr:hover {\n                    background: var(--bg-cell-bubble, #f0f4f8);\n                    cursor: pointer;\n                }\n                .pagination {\n                    margin-top: 16px;\n                    display: flex;\n                    gap: 8px;\n                    justify-content: center;\n                    align-items: center;\n                }\n                button {\n                    padding: 8px 16px;\n                    border: 1px solid var(--border-color, #d8dee9);\n                    border-radius: var(--border-radius, 8px);\n                    background: var(--bg-primary, #ffffff);\n                    color: var(--text-button, #81a1c1);\n                    cursor: pointer;\n                }\n                button:hover {\n                    background: var(--bg-header-hover, #c8d7e8);\n                }\n                button:disabled {\n                    color: var(--text-disabled, #a3be8c);\n                    cursor: not-allowed;\n                }\n                .json-view {\n                    margin-top: 16px;\n                    padding: 8px;\n                    background: var(--bg-row-even, #e6f0fa);\n                    border: 1px solid var(--border-color, #d8dee9);\n                    border-radius: var(--border-radius, 8px);\n                    max-height: 300px;\n                    overflow: auto;\n                    font-family: monospace;\n                    font-size: var(--font-size-cell, 14px);\n                }\n                @media (max-width: 768px) {\n                    .grid-container {\n                        padding: var(--padding-mobile, 8px);\n                    }\n                    th, td {\n                        padding: 8px;\n                        font-size: var(--font-size-cell-mobile, 13px);\n                    }\n                    .controls {\n                        flex-direction: column;\n                        align-items: stretch;\n                    }\n                    .json-view {\n                        font-size: var(--font-size-cell-mobile, 13px);\n                    }\n                }\n            </style>\n            <div class="grid-container" role="grid">\n                <div class="controls">\n                    <input type="text" placeholder="Filter..." aria-label="Filter grid data">\n                    <select aria-label="Rows per page">\n                        <option value="5" '.concat(this.rowsPerPage===5?"selected":"",'>5</option>\n                        <option value="10" ').concat(this.rowsPerPage===10?"selected":"",'>10</option>\n                        <option value="20" ').concat(this.rowsPerPage===20?"selected":"",'>20</option>\n                        <option value="50" ').concat(this.rowsPerPage===50?"selected":"",'>50</option>\n                    </select>\n                    <button class="toggle-json">Toggle JSON</button>\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            ').concat(t.map(e=>'\n                                <th aria-sort="'.concat(this.sortColumn===e?this.sortDirection:"none",'">\n                                    ').concat(e.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),"\n                                    ").concat(this.sortColumn===e?this.sortDirection==="asc"?"\u2191":"\u2193":"","\n                                </th>\n                            ")).join(""),"\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ").concat(u.map(e=>'\n                            <tr class="selectable">\n                                '.concat(t.map(a=>"<td>".concat(e[a]||"","</td>")).join(""),"\n                            </tr>\n                        ")).join(""),'\n                    </tbody>\n                </table>\n                <div class="pagination">\n                    <button ').concat(this.currentPage===1?"disabled":"",">Previous</button>\n                    <span>Page ").concat(this.currentPage," of ").concat(h,"</span>\n                    <button ").concat(this.currentPage===h?"disabled":"",">Next</button>\n                </div>\n                ").concat(this.showJson&&this.data.length>0?'\n                    <pre class="json-view">'.concat(JSON.stringify(this.data,null,2),"</pre>\n                "):"","\n            </div>\n        "),(b=this.shadow.querySelector("input"))==null||b.addEventListener("input",e=>{let a=e.target.value.toLowerCase();this.filteredData=this.data.filter(o=>t.some(p=>(o[p]||"").toLowerCase().includes(a))),this.currentPage=1,this.render()}),(f=this.shadow.querySelector("select"))==null||f.addEventListener("change",e=>{this.rowsPerPage=parseInt(e.target.value,10),this.currentPage=1,this.render()}),this.shadow.querySelectorAll("th").forEach((e,a)=>{e.addEventListener("click",()=>{let o=t[a];this.sortColumn===o?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=o,this.sortDirection="asc"),this.filteredData.sort((p,y)=>{var w,P;let l=(w=p[o])!=null?w:"",c=(P=y[o])!=null?P:"",C=["customer_id","tax_id"].includes(o),$=!isNaN(parseFloat(l))&&isFinite(parseFloat(l)),k=!isNaN(parseFloat(c))&&isFinite(parseFloat(c));if(C&&$&&k)return this.sortDirection==="asc"?parseFloat(l)-parseFloat(c):parseFloat(c)-parseFloat(l);let m=l.toString().toLowerCase(),x=c.toString().toLowerCase();return this.sortDirection==="asc"?m.localeCompare(x):x.localeCompare(m)}),this.render()})}),this.shadow.querySelectorAll(".pagination button").forEach(e=>{e.addEventListener("click",()=>{e.textContent==="Previous"&&this.currentPage>1?this.currentPage--:e.textContent==="Next"&&this.currentPage<h&&this.currentPage++,this.render()})}),this.shadow.querySelectorAll("tr.selectable").forEach(e=>{e.addEventListener("click",()=>{let a=Array.from(this.shadow.querySelectorAll("tr.selectable")).indexOf(e),o=u[a];window.dispatchEvent(new CustomEvent("row-selected",{detail:o}))})}),(v=this.shadow.querySelector(".toggle-json"))==null||v.addEventListener("click",()=>{this.showJson=!this.showJson,this.render()})}};customElements.define("fd-grid",g);})();
//# sourceMappingURL=fd-grid.js.map
